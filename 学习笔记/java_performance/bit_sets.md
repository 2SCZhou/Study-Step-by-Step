位集(Bit sets)
============
你偶尔会需要映射一个整型的键到一个或一些标记（boolean值），位集最适合这样的场景。

核心Java中只有一个位集实现：java.util.BitSet。它内部使用一个long[]数组，每个位映射到一个整数：第一个long的第０位映射到第０键，第１位映射到键１，依次类推。这意味着如果你想从高位映射键，比如将100,000,000映射成布尔值，那不可变的BitSet可能不是最好的选择，因为它会为从０到你的位集中最高位的键全部分配位。对于一个只在位置100,000,000存在位的位集来说，这意味着分配12.5M内存。

高基数问题可以通过在所有的位集操作中加上和减去这个基数来避免（当然，你需要事先知道这个基数）。如果需要映射负数值到布尔值你也应该这样做：java.util.BisSet不支持负数类型的键。

第三个需要避免的问题是映射超出int值范围的大数值。原始的java.util.BitSet只支持整型键。

最后，但并非最不重要的是划分问题－如果你需要在这存储一些值，在那存储一些值－你仍旧需要分配用于存储从0到位集最高位的键的全部内存。


